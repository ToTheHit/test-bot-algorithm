"use strict";(self.webpackChunktell_engine=self.webpackChunktell_engine||[]).push([[438],{9730:function(t,e,n){n.r(e),n.d(e,{default:function(){return Ci}});var r=n(7294),o=n(1787),i=r.createContext(),c=r.createContext(),u=n(8949);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={anchorPoint:{x:0,y:0},type:"",isToggled:!1},p=l((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"nodes",[]),f(this,"links",[]),f(this,"menu",s),f(this,"serialize",(function(){return{store:{nodes:JSON.parse(JSON.stringify(e.nodes)),links:JSON.parse(JSON.stringify(e.links))}}})),f(this,"deserialize",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.nodes,r=void 0===n?[]:n,o=t.links,i=void 0===o?[]:o;e.nodes=r,e.links=i})),f(this,"toggleMenu",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.menu=t?{anchorPoint:n,type:r,isToggled:t}:s})),(0,u.rC)(this,{nodes:u.LO,links:u.LO,menu:u.LO,serialize:u.aD,toggleMenu:u.aD,deserialize:u.aD})})),y=new p,d=n(4228),b=n(8027),g=n(2883),v=n(2139),h=n(1647);function m(){return m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m.apply(this,arguments)}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n(2411),n(650);var w=(0,h.Pi)((function(t){var e=t.addNode,n=t.values,o=y.toggleMenu,i=y.menu,c=O((0,d.w)({transition:{open:!0},transitionTimeout:100}),2),u=c[0],a=c[1],l=O((0,r.useState)(""),2),f=l[0],s=l[1],p=O((0,r.useState)(!1),2),h=p[0],P=p[1],w=(0,r.useRef)(null);(0,r.useEffect)((function(){"editor"===i.type&&a(i.isToggled)}),[i.isToggled]);var j=function(t){e(t.value,{clientX:i.anchorPoint.x,clientY:i.anchorPoint.y})};return r.createElement(b.B,m({},u,{anchorPoint:{x:i.anchorPoint.x-10,y:i.anchorPoint.y-10},onClose:function(){return o(!1),s(""),void a(!1)},overflow:"auto",setDownOverflow:!0,position:"anchor",boundingBoxPadding:"10",onKeyDown:function(){h||(w.current.focus(),P(!0))},onBlur:function(){P(!1)},onContextMenu:function(t){t.preventDefault()},className:"controlledMenu"}),r.createElement("li",{className:"szh-menu__item"},r.createElement("input",{ref:w,type:"text",placeholder:"Search",value:f,onChange:function(t){return s(t.target.value)}})),r.createElement(g.k,{takeOverflow:!0,style:{maxHeight:"300px",overflow:"auto"}},n.filter((function(t){return t.toUpperCase().includes(f.trim().toUpperCase())})).map((function(t){return r.createElement(v.s,{value:t,onClick:j,key:t},t)}))))}));w.propTypes={};var j=w,S=n(748),E=n.n(S),_=n(9669),k=n.n(_);function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var T=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._execute=e,this._undo=n}var e,n;return e=t,(n=[{key:"execute",value:function(t){this._execute(t)}},{key:"undo",value:function(t){this._undo(t)}}])&&R(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clear()}var e,n;return e=t,(n=[{key:"clear",value:function(){this.stack=[],this.index=0}},{key:"add",value:function(t){var e=t.execute,n=t.undo,r=new T(e,n);this.stack.length=this.index,this.stack.push(r),this.index+=1}},{key:"undo",value:function(){this.index>0&&(this.index-=1,this.stack[this.index].undo())}},{key:"redo",value:function(){this.index<this.stack.length&&(this.stack[this.index].execute(),this.index+=1)}}])&&D(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),M=n(1463),N=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return t instanceof M.Point?new M.Point(Math.round(t.x/e)*e,Math.round(t.y/e)*e):Math.round(t/e)*e},A=function(t,e){return t&&e&&Math.round(t.x)===Math.round(e.x)&&Math.round(t.y)===Math.round(e.y)},C=function(t,e){var n=function(t,e){return Math.hypot(t.x-e.x,t.y-e.y)},r=function(t,e){var r=e.A,o=e.B,i=new M.Point(o.x-r.x,o.y-r.y),c=new M.Point(r.x-t.x,r.y-t.y),u=-(i.x*c.x+i.y*c.y)/(Math.pow(i.x,2)+Math.pow(i.y,2));if(u>=0&&u<=1){var a=new M.Point((1-u)*r.x+u*o.x,(1-u)*r.y+u*o.y);return{point:a,distance:n(t,a)}}var l=n(t,r),f=n(t,o);return l<=f?{point:r,distance:l}:{point:o,distance:f}};if(!e.hasMiddlePoint())return r(t,{A:e.getFirstPosition(),B:e.getLastPosition()}).point;var o=r(t,{A:e.getFirstPosition(),B:e.getMiddlePosition()}),i=r(t,{A:e.getMiddlePosition(),B:e.getLastPosition()});return o.distance<=i.distance?o.point:i.point};function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e){return U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},U(t,e)}function F(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}var Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=W(r);if(o){var n=W(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return F(this,t)});function c(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,B(B({isAllowedRemove:!0},t),{},{type:"simplePoint"}))}return e=c,(n=[{key:"allowedRemove",get:function(){return this.options.isAllowedRemove}},{key:"getAllLinks",value:function(){return[this.getLink()]}}])&&V(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(S.PointModel);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){Z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=q(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},H.apply(this,arguments)}function q(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nt(t)););return t}function Q(t,e){return Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Q(t,e)}function tt(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return et(t)}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nt(t){return nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nt(t)}var rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=nt(r);if(o){var n=nt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return tt(this,t)});function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return G(this,c),(t=i.call(this,K({type:"simpleLink"},e))).points=[new Y({link:et(t),number:1}),new Y({link:et(t),number:2})],t}return e=c,(n=[{key:"getGridSize",value:function(){return this.getParent().getParent().getOptions().gridSize}},{key:"remove",value:function(){this.sourcePort&&(this.sourcePort.removeLink(this),this.sourcePort=null),this.targetPort&&(this.targetPort.removeLink(this),this.targetPort=null),H(nt(c.prototype),"remove",this).call(this)}},{key:"setSourcePort",value:function(t){var e=t||this.getTargetPort();H(nt(c.prototype),"setSourcePort",this).call(this,t),null==e||e.updatePortStatus()}},{key:"setTargetPort",value:function(t){var e=t||this.getTargetPort();H(nt(c.prototype),"setTargetPort",this).call(this,t),null==e||e.updatePortStatus()}},{key:"getMiddlePoint",value:function(){return this.hasMiddlePoint()?this.getPoints()[1]:null}},{key:"getSecondPoint",value:function(){return this.getPoints()[1]}},{key:"getSecondLastPoint",value:function(){var t=this.getPoints();return t[t.length-2]}},{key:"hasMiddlePoint",value:function(){return 3===this.getPoints().length}},{key:"getFirstPosition",value:function(){return N(this.getFirstPoint().getPosition(),this.getGridSize())}},{key:"getSecondPosition",value:function(){return N(this.getSecondPoint().getPosition(),this.getGridSize())}},{key:"getMiddlePosition",value:function(){return this.hasMiddlePoint()?N(this.getMiddlePoint().getPosition(),this.getGridSize()):null}},{key:"getSecondLastPosition",value:function(){return N(this.getSecondLastPoint().getPosition(),this.getGridSize())}},{key:"getLastPosition",value:function(){return N(this.getLastPoint().getPosition(),this.getGridSize())}},{key:"point",value:function(t,e,n){var r=H(nt(c.prototype),"point",this).call(this,t,e,n);return this.getParent().getParent().getDiagramEngine().getEngine().fireEvent({point:r,link:this,index:n},"linkPointAdded"),r}},{key:"removePoint",value:function(t){H(nt(c.prototype),"removePoint",this).call(this,t)}},{key:"generatePoint",value:function(t,e){return new Y({link:this,position:new M.Point(t,e)})}}])&&J(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(S.DefaultLinkModel);function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){ct(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ut(t){return function(t){if(Array.isArray(t))return at(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ft(t,e){return ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ft(t,e)}function st(t,e){if(e&&("object"===lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pt(t){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pt(t)}var yt=[15,25,50,75,100,150,200,300],dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=pt(n);if(r){var o=pt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return st(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),t=i.call(this,{type:o.InputType.MOUSE_WHEEL,fire:function(e){var n=e.event;n.stopPropagation();var r=t.engine.getModel();r.getLayers().forEach((function(t){return t.allowRepaint(!1)}));var o,i=Math.sign(n.deltaY)>0?"out":"in",c=yt.indexOf(yt.includes(r.getZoomLevel())?r.getZoomLevel():100);o="in"===i?Math.min(c+1,yt.length-1):Math.max(c-1,0);var u=r.getZoomLevel()/100;r.setZoomLevel(yt[o]);var a=r.getZoomLevel()/100,l=t.engine.getCanvas().getBoundingClientRect(),f=l.width,s=l.height,p=f*a-f*u,y=s*a-s*u,d=n.clientX-l.left,b=n.clientY-l.top,g=(d-r.getOffsetX())/u/f,v=(b-r.getOffsetY())/u/s;r.setOffset(r.getOffsetX()-p*g,r.getOffsetY()-y*v),t.engine.repaintCanvas(),r.getLayers().forEach((function(t){return t.allowRepaint(!0)}))}})}return e=c,Object.defineProperty(e,"prototype",{writable:!1}),e}(o.Action);function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function gt(t,e){return gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},gt(t,e)}function vt(t,e){if(e&&("object"===bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ht(t)}function ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(t){return mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},mt(t)}function Ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mt(n);if(r){var o=mt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return vt(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Ot(ht(e=i.call(this,{type:o.InputType.KEY_DOWN,fire:function(t){var n=t.event;if(!e.engine.getModel().isLocked()&&e.matchesInput(n)){n.preventDefault();var r=n.ctrlKey,o=n.shiftKey,i=n.code;r&&!o&&"KeyZ"===i?e.handleUndo():e.handleRedo()}}})),"matchesInput",(function(t){var e=t.ctrlKey,n=t.shiftKey,r=t.code;return e&&("KeyZ"===r||"KeyY"===r)||e&&n&&"KeyZ"===r})),Ot(ht(e),"handleUndo",(function(){e.engine.commands.undo(),e.engine.repaintCanvas()})),Ot(ht(e),"handleRedo",(function(){e.engine.commands.redo(),e.engine.repaintCanvas()})),e}return e=c,Object.defineProperty(e,"prototype",{writable:!1}),e}(o.Action);function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function jt(t){return function(t){if(Array.isArray(t))return St(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return St(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){kt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(){return Dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=xt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Dt.apply(this,arguments)}function xt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=At(t)););return t}function Mt(t,e){return Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Mt(t,e)}function Nt(t,e){if(e&&("object"===wt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function At(t){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},At(t)}var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mt(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=At(r);if(o){var n=At(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Nt(this,t)});function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Rt(this,c),i.call(this,_t(_t({isAllowedRemove:!0},t),{},{_updatedOn:Date.now()}))}return e=c,(n=[{key:"allowedRemove",get:function(){return this.options.isAllowedRemove}},{key:"getAllLinks",value:function(){return Object.values(this.getPorts()).map((function(t){return Object.values(t.getLinks())})).filter((function(t){return!!t&&t.length>0})).reduce((function(t,e){return[].concat(jt(t),jt(e))}),[])}},{key:"updateOptions",value:function(t){var e=this.options.data;this.options.data=_t(_t(_t({},this.options.data),t),{},{_updatedOn:Date.now()}),this.getParentCanvasModel().engine.getEngine().fireEvent({before:e,after:this.options.data},"nodeOptionsUpdated"),this.getParentCanvasModel().getDiagramEngine().repaintCanvas()}},{key:"serialize",value:function(){return _t(_t({},Dt(At(c.prototype),"serialize",this).call(this)),{},{data:this.options.data||{}})}},{key:"deserialize",value:function(t){this.options.data=t.data.data,Dt(At(c.prototype),"deserialize",this).call(this,t)}}])&&Tt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(S.NodeModel);function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Lt(t){return function(t){if(Array.isArray(t))return Bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zt(t,e){return zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},zt(t,e)}function Vt(t,e){if(e&&("object"===It(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ut(t)}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ft(t){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ft(t)}function Wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zt(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ft(n);if(r){var o=Ft(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return Vt(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Wt(Ut(t=i.call(this,{type:o.InputType.KEY_DOWN,fire:function(e){var n=e.event;t.engine.getModel().isLocked()||t.matchesInput(n)&&(n.preventDefault(),t.handleAction())}})),"matchesInput",(function(t){return"Delete"===t.code})),Wt(Ut(t),"handleAction",(function(){var e=t.engine.getModel().getSelectedEntities().filter((function(t){return!t.isLocked()&&(t.allowedRemove||t instanceof S.PointModel)}));e.length>0&&(t.fireEvent(e),e.forEach((function(t){return t.remove()})),t.engine.repaintCanvas())})),Wt(Ut(t),"fireEvent",(function(e){var n=e.filter((function(t){return t instanceof Ct})),r=e.filter((function(t){return t instanceof rt})),o=e.filter((function(t){return t instanceof Y})),i=n.reduce((function(t,e){return[].concat(Lt(t),Lt(e.getAllLinks()))}),[]),c=[].concat(Lt(i),Lt(r)).map((function(t){var e,n,r,o;return{id:t.getID(),points:t.getPoints(),targetEntity:{node:null===(e=t.getTargetPort())||void 0===e?void 0:e.getParent().getID(),port:null===(n=t.getTargetPort())||void 0===n?void 0:n.getID()},sourceEntity:{node:null===(r=t.getSourcePort())||void 0===r?void 0:r.getParent().getID(),port:null===(o=t.getSourcePort())||void 0===o?void 0:o.getID()}}})),u=o.map((function(t){return{data:t,linkID:t.getParent().getID()}}));t.engine.fireEvent({nodes:n,links:c,points:u},"entitiesRemoved")})),t}return e=c,Object.defineProperty(e,"prototype",{writable:!1}),e}(o.Action);function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}var Xt=["portName","alignment","type"];function Kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(n),!0).forEach((function(e){Gt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(){return Ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=qt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ht.apply(this,arguments)}function qt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ee(t)););return t}function Qt(t,e){return Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qt(t,e)}function te(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ee(t){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ee(t)}var ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qt(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ee(r);if(o){var n=ee(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return te(this,t)});function c(t){var e=t.portName,n=t.alignment,r=t.type,o=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,Xt);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,Zt({type:r,name:e,alignment:n,maximumLinks:1,isConnected:!1},o))}return e=c,(n=[{key:"updatePortStatus",value:function(){this.options.isConnected=Object.keys(this.getLinks()).length>0}},{key:"createLinkModel",value:function(){var t=new rt;return t.registerListener({}),t}},{key:"removeLink",value:function(t){var e,n;Ht(ee(c.prototype),"removeLink",this).call(this,t),null===(e=t.getTargetPort())||void 0===e||e.updatePortStatus(),null===(n=t.getSourcePort())||void 0===n||n.updatePortStatus()}},{key:"addLink",value:function(t){var e,n;Ht(ee(c.prototype),"addLink",this).call(this,t),null===(e=t.getTargetPort())||void 0===e||e.updatePortStatus(),null===(n=t.getSourcePort())||void 0===n||n.updatePortStatus()}},{key:"canLinkToPort",value:function(t){return{left:"right",right:"left"}[this.options.alignment]===t.options.alignment}},{key:"getId",value:function(){return this.options.id}},{key:"link",value:function(t,e){var n=this.createLinkModel(e);return n.setSourcePort(this),n.setTargetPort(t),this.updatePortStatus(!0),t.updatePortStatus(!0),n}},{key:"serialize",value:function(){return Zt(Zt({},Ht(ee(c.prototype),"serialize",this).call(this)),{},{isConnected:this.options.isConnected})}},{key:"deserialize",value:function(t){Ht(ee(c.prototype),"deserialize",this).call(this,t),this.options.isConnected=t.data.isConnected}},{key:"getMainLink",value:function(){var t=Object.values(this.getLinks());return t.length>0?t[0]:null}}])&&Jt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(S.PortModel);function re(t){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(t)}function oe(t,e){return oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},oe(t,e)}function ie(t,e){if(e&&("object"===re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ce(t){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ce(t)}var ue=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oe(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ce(n);if(r){var o=ce(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return ie(this,t)});function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,{portName:t,alignment:e,type:"text"})}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(ne);function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fe(){return fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=se(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},fe.apply(this,arguments)}function se(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=de(t)););return t}function pe(t,e){return pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},pe(t,e)}function ye(t,e){if(e&&("object"===ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function de(t){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},de(t)}var be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pe(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=de(r);if(o){var n=de(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ye(this,t)});function c(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{portName:t,alignment:e,type:"flow",maximumLinks:1})}return e=c,(n=[{key:"deserialize",value:function(t,e){fe(de(c.prototype),"deserialize",this).call(this,t,e)}},{key:"canLinkToPort",value:function(t){return!!fe(de(c.prototype),"canLinkToPort",this).call(this,t)&&this.options.type===t.options.type}}])&&le(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(ne);function ge(t){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(t)}function ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function he(){return he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=me(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},he.apply(this,arguments)}function me(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=we(t)););return t}function Oe(t,e){return Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Oe(t,e)}function Pe(t,e){if(e&&("object"===ge(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function we(t){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},we(t)}var je=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=we(r);if(o){var n=we(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Pe(this,t)});function c(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{portName:t,alignment:e,type:"variable",maximumLinks:1/0})}return e=c,(n=[{key:"canLinkToPort",value:function(t){return this.options.alignment!==t.options.alignment&&"flow"!==t.options.type}},{key:"deserialize",value:function(t,e){he(we(c.prototype),"deserialize",this).call(this,t,e)}}])&&ve(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(ne);function Se(t){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(t)}function Ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return _e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_e(t,e)}function ke(t,e){if(e&&("object"===Se(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Re(t){return Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Re(t)}var Te=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_e(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Re(r);if(o){var n=Re(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ke(this,t)});function c(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{portName:t,alignment:e,type:"button",maximumLinks:1/0})}return e=c,(n=[{key:"canLinkToPort",value:function(t){return this.options.alignment!==t.options.alignment&&"flow"!==t.options.type}}])&&Ee(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(ne);function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){Ne(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ce(t,e){return Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ce(t,e)}function Ie(t,e){if(e&&("object"===De(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Le(t){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Le(t)}var Be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ce(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Le(n);if(r){var o=Le(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return Ie(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ae(this,i),(t=o.call(this,{data:Me({title:"",description:""},e),type:"incomingText"})).addPort(new be("flowIn","left")),t.addPort(new be("flowOut","right")),t.addPort(new ue("comparisonText","left")),t.addPort(new Te("button","left")),t}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Ct),ze=Be,Ve=n(5697),Ue=n.n(Ve);function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function We(){var t=[];return Array.prototype.slice.call(arguments).forEach((function(e){if(e)switch(Fe(e)){case"string":t.push(e);break;case"object":Object.keys(e).forEach((function(n){e[n]&&t.push(n)}));break;default:t.push(""+e)}})),t.join(" ")}var Ye=function(t){var e=t.engine,n=t.node,o=t.name,i=t.portStatus;return r.createElement(S.PortWidget,{port:n.getPort(o),engine:e,name:o},r.createElement("div",{className:We("FlowPort",{"FlowPort--inactive":!i})}))};Ye.propTypes={},Ye.defaultProps={};var $e=Ye,Xe=function(t){var e=t.node,n=t.engine,o=t.name,i=t.align,c=t.color,u=t.label,a=(t.port,t.links,t.portStatus);return r.createElement("div",{className:We("TextPort",{"TextPort--right":"right"===i},{"TextPort--connected":a})},r.createElement(S.PortWidget,{port:e.getPort(o),engine:n},r.createElement("div",{className:We("TextPort__connector",{"TextPort__connector--right":"right"===i}),style:{backgroundColor:c}})),r.createElement("div",{className:We("TextPort__label",{"TextPort__label--right":"right"===i})},u))};Xe.propTypes={},Xe.defaultProps={};var Ke=Xe,Ze=function(t){var e=t.node,n=t.engine,o=t.name,i=t.align,c=t.portStatus;return r.createElement("div",{className:We("VariablePort",{"VariablePort--right":"right"===i},{"VariablePort--connected":c})},r.createElement(S.PortWidget,{port:e.getPort(o),engine:n,className:We("VariablePort__connector",{"VariablePort__connector--right":"right"===i})}))};Ze.propTypes={},Ze.defaultProps={};var Ge=Ze,Je=function(t){var e=t.node,n=t.engine,o=t.name,i=t.align,c=t.color,u=t.label,a=(t.port,t.links,t.portStatus);return r.createElement("div",{className:We("ButtonPort",{"ButtonPort--right":"right"===i},{"ButtonPort--connected":a})},r.createElement(S.PortWidget,{port:e.getPort(o),engine:n},r.createElement("div",{className:We("ButtonPort__connector",{"ButtonPort__connector--right":"right"===i}),style:{backgroundColor:c}})),r.createElement("div",{className:We("ButtonPort__label",{"ButtonPort__label--right":"right"===i})},u))};function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function qe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qe(Object(n),!0).forEach((function(e){tn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function en(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nn(t,e){return nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},nn(t,e)}function rn(t,e){if(e&&("object"===He(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function on(t){return on=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},on(t)}Je.propTypes={},Je.defaultProps={};var cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nn(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=on(n);if(r){var o=on(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return rn(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return en(this,i),(t=o.call(this,{data:Qe({title:"",description:""},e),type:"incomingMedia"})).addPort(new be("flowIn","left")),t.addPort(new be("flowOut","right")),t}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Ct),un=cn;function an(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ln=function(t){var e,n,o=t.node,i=t.engine,u=(e=(0,r.useContext)(c),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return an(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=u[0],l=u[1];return r.createElement("div",{className:We("TextNode",{"TextNode--selected":o.isSelected()}),onClick:function(){var t=a||[];t.push(o),l(t)}},r.createElement("div",{className:"TextNode__header"},r.createElement("div",{className:"TextNode__type"}),r.createElement("div",{className:"TextNode__title"},o.options.data.title||"IncomingTextNode")),r.createElement("div",{className:"TextNode__flowPorts"},r.createElement($e,{engine:i,node:o,name:"flowIn",portStatus:o.getPort("flowIn").options.isConnected}),r.createElement($e,{engine:i,node:o,name:"flowOut",portStatus:o.getPort("flowOut").options.isConnected})),r.createElement("div",{className:"TextNode__contentPorts"},r.createElement("div",{className:"TextNode__contentPorts__left"},r.createElement(Ke,{port:o.getPort("comparisonText"),node:o,engine:i,name:"comparisonText",align:"left",color:"#EDEDED",label:"  ",portStatus:o.getPort("comparisonText").options.isConnected}),r.createElement(Ke,{port:o.getPort("button"),node:o,engine:i,name:"button",align:"left",color:"#EDEDED",label:"",portStatus:o.getPort("button").options.isConnected}))))};ln.propTypes={node:Ue().instanceOf(ze),engine:Ue().instanceOf(S.DiagramEngine)},ln.defaultProps={node:null,engine:null};var fn=ln;function sn(t){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(t)}function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yn(t,e){return yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},yn(t,e)}function dn(t,e){if(e&&("object"===sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bn(t){return bn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},bn(t)}var gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yn(t,e)}(u,t);var e,n,o,i,c=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bn(o);if(i){var n=bn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return dn(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.call(this,"incomingText")}return e=u,(n=[{key:"generateReactWidget",value:function(t){return r.createElement(fn,{engine:this.engine,node:t.model})}},{key:"generateModel",value:function(t){return new ze(t.initialConfig)}}])&&pn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.AbstractReactFactory);function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var hn=function(t){var e,n,o=t.node,i=void 0===o?{}:o,u=t.engine,a=(e=(0,r.useContext)(c),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return vn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],f=a[1];return r.createElement("div",{className:We("MediaNode",{"MediaNode--selected":i.isSelected()}),onClick:function(){var t=l||[];t.push(i),f(t)}},r.createElement("div",{className:"MediaNode__header"},r.createElement("div",{className:"MediaNode__type"}),r.createElement("div",{className:"MediaNode__title"},i.options.data.title||"MediaNode")),r.createElement("div",{className:"MediaNode__flowPorts"},r.createElement($e,{engine:u,node:i,name:"flowIn",portStatus:i.getPort("flowIn").options.isConnected}),r.createElement($e,{engine:u,node:i,name:"flowOut",portStatus:i.getPort("flowOut").options.isConnected})))};hn.propTypes={node:Ue().instanceOf(un),engine:Ue().instanceOf(S.DiagramEngine)},hn.defaultProps={node:null,engine:null};var mn=hn;function On(t){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(t)}function Pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wn(t,e){return wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},wn(t,e)}function jn(t,e){if(e&&("object"===On(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sn(t){return Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Sn(t)}var En=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}(u,t);var e,n,o,i,c=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Sn(o);if(i){var n=Sn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return jn(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.call(this,"incomingMedia")}return e=u,(n=[{key:"generateReactWidget",value:function(t){return r.createElement(mn,{engine:this.engine,node:t.model})}},{key:"generateModel",value:function(t){return new un(t.initialConfig)}}])&&Pn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.AbstractReactFactory);function _n(t){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_n(t)}function kn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kn(Object(n),!0).forEach((function(e){Tn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mn(t,e){return Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Mn(t,e)}function Nn(t,e){if(e&&("object"===_n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function An(t){return An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},An(t)}var Cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mn(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=An(r);if(o){var n=An(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Nn(this,t)});function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Dn(this,c),(t=i.call(this,{data:Rn({},e),type:"variableNode"})).addPort(new je("out","right")),t}return e=c,(n=[{key:"updateOptions",value:function(t){this.getParentCanvasModel().getDiagramEngine().updateVariableOptions(this.options.data.id,t)}}])&&xn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(Ct),In=Cn;function Ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bn=function(t){var e,n,o=t.node,i=t.engine,u=(e=(0,r.useContext)(c),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Ln(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=u[0],l=u[1];return r.createElement("div",{className:We("VariableNode",{"VariableNode--selected":o.isSelected()}),onClick:function(){var t=a||[];t.push(o),l(t)}},r.createElement("div",{className:"VariableNode__title"},o.options.data.title),r.createElement(Ge,{engine:i,node:o,name:"out",portStatus:o.getPort("out").options.isConnected,label:"test",align:"right"}))};Bn.propTypes={node:Ue().instanceOf(In),engine:Ue().instanceOf(S.DiagramEngine)},Bn.defaultProps={node:null,engine:null};var zn=Bn;function Vn(t){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fn(t,e){return Fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fn(t,e)}function Wn(t,e){if(e&&("object"===Vn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Yn(t){return Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yn(t)}var $n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fn(t,e)}(u,t);var e,n,o,i,c=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yn(o);if(i){var n=Yn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Wn(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.call(this,"variableNode")}return e=u,(n=[{key:"generateReactWidget",value:function(t){return r.createElement(zn,{engine:this.engine,node:t.model})}},{key:"generateModel",value:function(t){return new In}}])&&Un(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.AbstractReactFactory),Xn=function(t){var e=t.node,n=t.engine;return r.createElement("div",{className:We("StartNode",{"StartNode--selected":e.isSelected()})},r.createElement("div",{className:"StartNode__header"},r.createElement("div",{className:"StartNode__type"}),r.createElement("div",{className:"StartNode__title"},"Start")),r.createElement("div",{className:"StartNode__flowPorts"},r.createElement($e,{engine:n,node:e,name:"flowOut",portStatus:e.getPort("flowOut").options.isConnected})))};function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(t)}function Zn(t,e){return Zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Zn(t,e)}function Gn(t,e){if(e&&("object"===Kn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Jn(t){return Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jn(t)}var Hn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zn(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Jn(n);if(r){var o=Jn(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return Gn(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,{type:"startNode",isAllowedRemove:!1})).addPort(new be("flowOut","right")),t}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Ct);function qn(t){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(t)}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tr(t,e){return tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tr(t,e)}function er(t,e){if(e&&("object"===qn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function nr(t){return nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nr(t)}var rr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tr(t,e)}(u,t);var e,n,o,i,c=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=nr(o);if(i){var n=nr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return er(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.call(this,"startNode")}return e=u,(n=[{key:"generateReactWidget",value:function(t){return r.createElement(Xn,{engine:this.engine,node:t.model})}},{key:"generateModel",value:function(t){return new Hn}}])&&Qn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.AbstractReactFactory);function or(t){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(t)}function ir(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ir(Object(n),!0).forEach((function(e){ur(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ur(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lr(t,e){return lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},lr(t,e)}function fr(t,e){if(e&&("object"===or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sr(t){return sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},sr(t)}var pr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lr(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=sr(n);if(r){var o=sr(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return fr(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ar(this,i),(t=o.call(this,{data:cr({title:"",description:""},e),type:"outgoingText"})).addPort(new be("flowIn","left")),t.addPort(new be("flowOut","right")),t.addPort(new ue("outgoingText","left")),t}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Ct),yr=pr;function dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var br=function(t){var e,n,o=t.node,i=t.engine,u=(e=(0,r.useContext)(c),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return dr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dr(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=u[0],l=u[1];return r.createElement("div",{className:We("OutgoingTextNode",{"OutgoingTextNode--selected":o.isSelected()}),onClick:function(){var t=a||[];t.push(o),l(t)}},r.createElement("div",{className:"OutgoingTextNode__header"},r.createElement("div",{className:"OutgoingTextNode__type"}),r.createElement("div",{className:"OutgoingTextNode__title"},o.options.data.title||"OutgoingTextNode")),r.createElement("div",{className:"OutgoingTextNode__flowPorts"},r.createElement($e,{engine:i,node:o,name:"flowIn",portStatus:o.getPort("flowIn").options.isConnected}),r.createElement($e,{engine:i,node:o,name:"flowOut",portStatus:o.getPort("flowOut").options.isConnected})),r.createElement("div",{className:"OutgoingTextNode__contentPorts"},r.createElement("div",{className:"OutgoingTextNode__contentPorts__left"},r.createElement(Ke,{port:o.getPort("outgoingText"),node:o,engine:i,name:"outgoingText",align:"left",color:"#EDEDED",label:"  ",portStatus:o.getPort("outgoingText").options.isConnected}))))};br.propTypes={node:Ue().instanceOf(yr),engine:Ue().instanceOf(S.DiagramEngine)},br.defaultProps={node:null,engine:null};var gr=br;function vr(t){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vr(t)}function hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mr(t,e){return mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},mr(t,e)}function Or(t,e){if(e&&("object"===vr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Pr(t){return Pr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Pr(t)}var wr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mr(t,e)}(u,t);var e,n,o,i,c=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Pr(o);if(i){var n=Pr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Or(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.call(this,"outgoingText")}return e=u,(n=[{key:"generateReactWidget",value:function(t){return r.createElement(gr,{engine:this.engine,node:t.model})}},{key:"generateModel",value:function(t){return new yr(t.initialConfig)}}])&&hr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.AbstractReactFactory);function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function Sr(t,e){return Sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Sr(t,e)}function Er(t,e){if(e&&("object"===jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _r(t){return _r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_r(t)}var kr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sr(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_r(n);if(r){var o=_r(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return Er(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).type="customNode",t}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(S.DefaultNodeFactory);function Rr(t){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rr(t)}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dr(t,e){return Dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Dr(t,e)}function xr(t,e){if(e&&("object"===Rr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mr(t){return Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mr(t)}var Nr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mr(r);if(o){var n=Mr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return xr(this,t)});function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,t)).cb=function(t){return new ue},n}return e=c,(n=[{key:"generateModel",value:function(t){return this.cb(t.initialConfig)}}])&&Tr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.AbstractModelFactory);function Ar(t){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(t)}function Cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ir(t,e){return Ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ir(t,e)}function Lr(t,e){if(e&&("object"===Ar(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Br(t){return Br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Br(t)}var zr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ir(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Br(r);if(o){var n=Br(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Lr(this,t)});function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,t)).cb=function(t){return new be(t)},n}return e=c,(n=[{key:"generateModel",value:function(t){return this.cb(t.initialConfig)}}])&&Cr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.AbstractModelFactory);function Vr(t){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(t)}function Ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fr(t,e){return Fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fr(t,e)}function Wr(t,e){if(e&&("object"===Vr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Yr(t){return Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yr(t)}var $r=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yr(r);if(o){var n=Yr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Wr(this,t)});function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,t)).cb=function(t){return new je},n}return e=c,(n=[{key:"generateModel",value:function(t){return this.cb(t.initialConfig)}}])&&Ur(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.AbstractModelFactory);function Xr(t){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xr(t)}function Kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zr(t,e){return Zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Zr(t,e)}function Gr(t,e){if(e&&("object"===Xr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Jr(t){return Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jr(t)}var Hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Jr(r);if(o){var n=Jr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Gr(this,t)});function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,t)).cb=function(t){return new Te},n}return e=c,(n=[{key:"generateModel",value:function(t){return this.cb(t.initialConfig)}}])&&Kr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.AbstractModelFactory);function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function to(t,e){return to=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},to(t,e)}function eo(t,e){if(e&&("object"===qr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function no(t){return no=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},no(t)}var ro=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&to(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=no(r);if(o){var n=no(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return eo(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,t)).cb=function(t){return new rt(t)},e}return e=c,(n=[{key:"generateModel",value:function(t){return this.cb(t.initialConfig)}}])&&Qr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(S.DefaultLinkFactory);function oo(t){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oo(t)}function io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function co(){return co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=uo(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},co.apply(this,arguments)}function uo(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fo(t)););return t}function ao(t,e){return ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ao(t,e)}function lo(t,e){if(e&&("object"===oo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fo(t){return fo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},fo(t)}var so=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ao(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fo(r);if(o){var n=fo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return lo(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this)).engine=t,e}return e=c,(n=[{key:"getDiagramEngine",value:function(){return this.engine}},{key:"getSelectedEntities",value:function(){return co(fo(c.prototype),"getSelectedEntities",this).call(this)}},{key:"clearSelection",value:function(){co(fo(c.prototype),"clearSelection",this).call(this),this.engine.setSelected([])}},{key:"setSelection",value:function(t){this.engine.setSelected(t)}}])&&io(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(S.DiagramModel);function po(t){return po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},po(t)}function yo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yo(Object(n),!0).forEach((function(e){Eo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function go(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return vo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vo(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ho(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mo(){return mo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Oo(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},mo.apply(this,arguments)}function Oo(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=So(t)););return t}function Po(t,e){return Po=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Po(t,e)}function wo(t,e){if(e&&("object"===po(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jo(t)}function jo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function So(t){return So=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},So(t)}function Eo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Po(t,e)}(u,t);var e,n,r,i,c=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=So(r);if(i){var n=So(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wo(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Eo(jo(t=c.call(this,{name:"move-items"})),"getNodesPositions",(function(){return t.engine.getModel().getSelectedEntities().filter((function(t){return t instanceof Ct})).map((function(t){return{id:t.getID(),position:t.getPosition()}}))})),Eo(jo(t),"getLinksPoints",(function(){return t.engine.getModel().getSelectedEntities().filter((function(t){return t instanceof Ct||t instanceof Y})).map((function(t){return t.getAllLinks()})).flat().map((function(t){return{id:t.getID(),points:t.getPoints().reduce((function(t,e){return t[e.getID()]={position:e.getPosition()},t}),{})}}))})),Eo(jo(t),"adjustLinkPoints",(function(e){var n=e.getFirstPosition(),r=e.getLastPosition();if(e.hasMiddlePoint()||n.x===r.x||n.y===r.y){if(e.hasMiddlePoint()){"horizontal"===t.linkDirections[e.getID()]?e.getMiddlePoint().setPosition(r.x,n.y):e.getMiddlePoint().setPosition(n.x,r.y);var o=e.getMiddlePosition();(A(n,o)||A(o,r))&&e.removePoint(e.getMiddlePoint())}}else e.addPoint(e.generatePoint(n.x,r.y),1)})),t.registerAction(new o.Action({type:o.InputType.MOUSE_DOWN,fire:function(e){var n,r;t.engine.getModel().isLocked()?t.eject():(t.lastDisplacement=new M.Point(0,0),t.element=t.engine.getActionEventBus().getModelForEvent(e),t.element?(t.element.isSelected()||t.engine.getModel().clearSelection(),t.linkDirections=t.getLinkDirections(t.element),t.element.setSelected(!0),t.engine.repaintCanvas(),t.nodesBefore=t.getNodesPositions(),t.linksBefore=t.getLinksPoints(),t.element instanceof S.PointModel&&(t.sourceBefore={id:t.element.getLink().getID(),points:t.element.getLink().getPoints(),targetEntity:{node:null===(n=t.element.getLink().getTargetPort())||void 0===n?void 0:n.getParent().getID(),port:null===(r=t.element.getLink().getTargetPort())||void 0===r?void 0:r.getID()}})):t.eject())}})),t.registerAction(new o.Action({type:o.InputType.MOUSE_UP,fire:function(e){if(0!==t.lastDisplacement.x||0!==t.lastDisplacement.y){if(t.element instanceof S.PointModel&&!t.element.getLink().getTargetPort()){var n=t.engine.getMouseElement(e.event);if(n instanceof S.PortModel&&t.element.getLink().getSourcePort().canLinkToPort(n)){var r,o;t.element.getLink().setTargetPort(n);var i={id:t.element.getLink().options.id,points:t.element.getLink().getPoints(),targetEntity:{node:null===(r=t.element.getLink().getTargetPort())||void 0===r?void 0:r.getParent().getID(),port:null===(o=t.element.getLink().getTargetPort())||void 0===o?void 0:o.getID()}};return t.engine.repaintCanvas(),void t.engine.fireEvent({before:t.sourceBefore,after:i},"linkChanged")}}t.fireEvent()}}})),t}return e=u,(n=[{key:"fireEvent",value:function(){this.engine.fireEvent({nodes:{before:this.nodesBefore,after:this.getNodesPositions()},links:{before:this.linksBefore,after:this.getLinksPoints()}},"entitiesMoved")}},{key:"activated",value:function(t){mo(So(u.prototype),"activated",this).call(this,t),this.initialPositions={}}},{key:"getLinksFromNode",value:function(t){return t instanceof Ct?Object.values(t.getPorts()).map((function(t){return Object.entries(t.getLinks())})).filter((function(t){return t.length>0})).flat().map((function(t){var e=go(t,2);return[[e[0],e[1]]]})).flat():[]}},{key:"getLinkDirections",value:function(t){var e=this;return this.getLinksFromNode(t).reduce((function(t,n){var r=go(n,2),o=r[0],i=r[1];return bo(bo({},t),{},Eo({},o,e.getLinkDirection(i)))}),{})}},{key:"getLinkDirection",value:function(t){if(!t.hasMiddlePoint())return null;var e=t.getFirstPosition(),n=t.getMiddlePosition();return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map((function(t){return Math.round(t.x)})).every((function(t,e,n){return t===n[0]}))}(e,n)?"vertical":function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map((function(t){return Math.round(t.y)})).every((function(t,e,n){return t===n[0]}))}(e,n)?"horizontal":null}},{key:"fireMouseMoved",value:function(t){var e=this;if(1===t.event.nativeEvent.which){var n=N(new M.Point(t.virtualDisplacementX,t.virtualDisplacementY),this.engine.getModel().getOptions().gridSize);A(n,this.lastDisplacement)||(this.lastDisplacement=n,this.engine.getModel().getSelectedEntities().filter((function(t){return t instanceof Ct||t instanceof S.PointModel})).forEach((function(n){e.moveEntity(n,t)})),this.engine.repaintCanvas())}}},{key:"moveEntity",value:function(t,e){if(!t.isLocked()){this.initialPositions[t.getID()]||(this.initialPositions[t.getID()]={point:t.getPosition(),item:t});var n=this.initialPositions[t.getID()].point,r=this.engine.getModel();t.setPosition(r.getGridPosition(n.x+e.virtualDisplacementX),r.getGridPosition(n.y+e.virtualDisplacementY))}}},{key:"adjustNodeLinks",value:function(t){var e=this;Object.values(t.getPorts()).forEach((function(t){return Object.values(t.getLinks()).forEach(e.adjustLinkPoints)}))}},{key:"adjustLinkBifurcations",value:function(t){var e=this;t.getBifurcations().forEach((function(t){e.adjustFirstAndLastPoints(t),e.adjustLinkPoints(t)}))}},{key:"adjustFirstAndLastPoints",value:function(t){var e=this.engine.getModel().getOptions().gridSize,n=t.getFirstPoint(),r=N(C(n.getPosition(),t.getBifurcationSource()),e);if(n.setPosition(r.x,r.y),t.getBifurcationTarget()){var o=t.getLastPoint(),i=N(C(o.getPosition(),t.getBifurcationTarget()),e);o.setPosition(i.x,i.y)}}}])&&ho(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.AbstractDisplacementState);function ko(t){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ko(t)}function Ro(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function To(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ro(Object(n),!0).forEach((function(e){Io(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Do(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mo(t,e){return Mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Mo(t,e)}function No(t,e){if(e&&("object"===ko(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ao(t)}function Ao(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Co(t){return Co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Co(t)}function Io(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mo(t,e)}(u,t);var e,n,r,i,c=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Co(r);if(i){var n=Co(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return No(this,t)});function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Do(this,u),Io(Ao(t=c.call(this,To({name:"drag-link"},e))),"fireEvent",(function(e,n){t.engine.fireEvent({before:e,after:n},"linkAdded")})),t.registerAction(new o.Action({type:o.InputType.MOUSE_DOWN,fire:function(e){var n=t.engine.getMouseElement(e.event);n instanceof ne?(t.port=n,t.link=t.port.createLinkModel(),t.link?(t.link.setSelected(!0),t.link.setSourcePort(t.port),t.engine.getModel().addLink(t.link),t.port.reportPosition()):t.eject()):t.eject()}})),t.registerAction(new o.Action({type:o.InputType.MOUSE_UP,fire:function(e){var n,r,o,i,c=t.engine.getMouseElement(e.event);if(c instanceof Ct)return t.link.remove(),void t.engine.repaintCanvas();if(!(c instanceof ne))return t.link.remove(),void t.engine.repaintCanvas();if(!t.port.canLinkToPort(c)||!c.canLinkToPort(t.port)||t.port.getParent().getID()===c.getParent().getID())return t.link.remove(),void t.engine.repaintCanvas();if(t.link.setTargetPort(c),c.reportPosition(),t.isNearbySourcePort(e.event))return t.link.remove(),void t.engine.repaintCanvas();if(t.isDuplicatePort(c))return t.link.remove(),void t.engine.repaintCanvas();var u=[];if(1===t.port.getMaximumLinks()&&2===Object.keys(t.port.getLinks()).length){var a,l,f,s,p=Object.keys(t.port.getLinks())[0],y=t.port.getLinks()[p];u.push({id:p,points:y.getPoints(),targetEntity:{node:null===(a=y.getTargetPort())||void 0===a?void 0:a.getParent().getID(),port:null===(l=y.getTargetPort())||void 0===l?void 0:l.getID()},sourceEntity:{node:null===(f=y.getSourcePort())||void 0===f?void 0:f.getParent().getID(),port:null===(s=y.getSourcePort())||void 0===s?void 0:s.getID()}}),y.remove()}if(1===c.getMaximumLinks()&&2===Object.keys(c.getLinks()).length){var d,b,g,v,h=Object.keys(c.getLinks())[0],m=c.getLinks()[h];u.push({id:h,points:m.getPoints(),targetEntity:{node:null===(d=m.getTargetPort())||void 0===d?void 0:d.getParent().getID(),port:null===(b=m.getTargetPort())||void 0===b?void 0:b.getID()},sourceEntity:{node:null===(g=m.getSourcePort())||void 0===g?void 0:g.getParent().getID(),port:null===(v=m.getSourcePort())||void 0===v?void 0:v.getID()}}),m.remove()}var O=[{id:t.link.getID(),points:t.link.getPoints(),targetEntity:{node:null===(n=t.link.getTargetPort())||void 0===n?void 0:n.getParent().getID(),port:null===(r=t.link.getTargetPort())||void 0===r?void 0:r.getID()},sourceEntity:{node:null===(o=t.link.getSourcePort())||void 0===o?void 0:o.getParent().getID(),port:null===(i=t.link.getSourcePort())||void 0===i?void 0:i.getID()}}];t.fireEvent(u,O),t.engine.repaintCanvas()}})),t}return e=u,(n=[{key:"isNearbySourcePort",value:function(t){var e,n,r,o=this.engine.getRelativeMousePoint(t),i=this.link.getSourcePort(),c=i.width;return e=o,n=i.getPosition(),r=c,Math.abs(e.x-n.x)<=r&&Math.abs(e.y-n.y)<=r}},{key:"isDuplicatePort",value:function(t){var e=this;if(Object.keys(t.getLinks()).length>1){var n=t.getLinks(),r=0;return Object.keys(n).forEach((function(t){n[t].getSourcePort().getID()!==e.port.getID()&&n[t].getTargetPort().getID()!==e.port.getID()||(r+=1)})),2===r}return!1}},{key:"fireMouseMoved",value:function(t){var e=this.port.getPosition(),n=this.engine.getModel().getZoomLevel()/100,r=this.engine.getModel().getOffsetX()/n,o=this.engine.getModel().getOffsetY()/n,i=this.initialXRelative/n,c=this.initialYRelative/n,u=e.x-r+(i-e.x)+t.virtualDisplacementX,a=e.y-o+(c-e.y)+t.virtualDisplacementY;this.link.getLastPoint().setPosition(u,a),this.engine.repaintCanvas()}}])&&xo(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.AbstractDisplacementState);function Bo(t){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bo(t)}function zo(t,e){return zo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},zo(t,e)}function Vo(t,e){if(e&&("object"===Bo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Uo(t){return Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Uo(t)}var Fo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zo(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Uo(n);if(r){var o=Uo(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return Vo(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this)).registerAction(new o.Action({type:o.InputType.MOUSE_UP,fire:function(){var e=t.engine.getModel().getSelectedEntities();t.engine.getModel().setSelection(e)}})),t}return e=c,Object.defineProperty(e,"prototype",{writable:!1}),e}(o.SelectionBoxState);function Wo(t){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(t)}function Yo(t,e){return Yo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Yo(t,e)}function $o(t,e){if(e&&("object"===Wo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Xo(t){return Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Xo(t)}var Ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yo(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xo(n);if(r){var o=Xo(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return $o(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this)).keys=["shift"],t.registerAction(new o.Action({type:o.InputType.MOUSE_DOWN,fire:function(e){var n=t.engine.getActionEventBus().getModelForEvent(e);n?(n.setSelected(!0),t.engine.repaintCanvas()):t.transitionWithEvent(new Fo,e)}})),t.registerAction(new o.Action({type:o.InputType.MOUSE_UP,fire:function(){var e=t.engine.getModel().getSelectedEntities();t.engine.getModel().setSelection(e)}})),t}return e=c,Object.defineProperty(e,"prototype",{writable:!1}),e}(o.State);function Zo(t){return Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zo(t)}function Go(t,e){return Go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Go(t,e)}function Jo(t,e){if(e&&("object"===Zo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ho(t){return Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ho(t)}var qo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Go(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ho(n);if(r){var o=Ho(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return Jo(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,{name:"diagram-states"})).childStates=[new Ko],t.dragItems=new _o,t.dragCanvas=new o.DragCanvasState,t.dragNewLink=new Lo,t.registerAction(new o.Action({type:o.InputType.MOUSE_DOWN,fire:function(e){var n=t.engine.getActionEventBus().getModelForEvent(e);n?n instanceof S.PortModel?t.transitionWithEvent(t.dragNewLink,e):t.transitionWithEvent(t.dragItems,e):t.transitionWithEvent(t.dragCanvas,e)}})),t}return e=c,Object.defineProperty(e,"prototype",{writable:!1}),e}(o.State);function Qo(t){return function(t){if(Array.isArray(t))return ti(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ti(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ti(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ni(t,e,n){return e&&ei(t.prototype,e),n&&ei(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ri(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function oi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ri(Object(n),!0).forEach((function(e){ii(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ii(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}for(var ci={textNode:new gn,variableNode:new $n,startNode:new rr,outgoingText:new wr,mediaNode:new En,customNode:new kr},ui={textPort:new Nr("text"),flowPort:new zr("flow"),variablePort:new $r("variable"),buttonPort:new Hr("button")},ai={simpleLink:new ro("simpleLink")},li={textNode:function(t){return new ze(t)},variableNode:function(t){return new In(t)},startNode:function(t){return new Hn(t)},outgoingText:function(t){return new yr(t)},mediaNode:function(t){return new un(t)}},fi=oi({},li),si=0,pi=Object.keys({startNode:!0,variableNode:!0});si<pi.length;si++){var yi=pi[si];delete fi[yi]}var di=ni((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ii(this,"getEngine",(function(){return r.engine})),ii(this,"getModel",(function(){return r.engine.getModel()})),ii(this,"getVariables",(function(){return r.normalizedVariables})),ii(this,"repaintCanvas",(function(){r.engine.repaintCanvas()})),ii(this,"initializeEngine",(function(){var t,e,n;r.engine=E()({registerDefaultDeleteItemsAction:!1,registerDefaultZoomCanvasAction:!1}),r.engine.commands=new x,r.engine.registerListener((e=(t=r).engine,n=t.editComponentConfiguration,{componentsAdded:function(t){var n=t.nodes;e.commands.add({execute:function(){n.forEach((function(t){return e.getModel().addNode(t)}))},undo:function(){n.forEach((function(t){return t.remove()}))}})},linkPointAdded:function(t){var n=t.link,r=t.point,o=t.index;e.commands.add({execute:function(){n.addPoint(r,o)},undo:function(){n.removePoint(r)}})},componentEdited:function(t){var r=t.node,o=t.configurations,i=t.links;e.commands.add({execute:function(){n(r,o.after)},undo:function(){n(r,o.before),i.before.forEach((function(t){return e.getModel().addLink(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[].concat(ut(Object.values(e.getModel().getActiveNodeLayer().getModels())),ut(n)),o=t.getSourcePort();o&&(o=r.find((function(e){return e.getID()===t.getSourcePort().getParent().getID()})).getPort(o.getName()),t.setSourcePort(o),o.addLink(t));var i=t.getTargetPort();return i&&(i=r.find((function(e){return e.getID()===t.getTargetPort().getParent().getID()})).getPort(i.getName()),t.setTargetPort(i),i.addLink(t)),t}(t))}))}})},linkAdded:function(t){var n=t.before,r=t.after,o=function(t,n){t.forEach((function(t){e.getModel().getLink(t.id).remove()})),n.forEach((function(t){var n=e.getModel().getNode(t.sourceEntity.node).getPortFromID(t.sourceEntity.port),r=e.getModel().getNode(t.targetEntity.node).getPortFromID(t.targetEntity.port),o=new rt({id:t.id});o.setSourcePort(n),o.setTargetPort(r),o.setPoints(t.points),e.getModel().addLink(o)}))};e.commands.add({execute:function(){o(n,r)},undo:function(){o(r,n)}})},linkChanged:function(t){var n=t.before,r=t.after,o=function(t){var n,r=e.getModel().getLink(t.id);r.setPoints(t.points);var o=!!t.targetEntity.port&&(null===(n=e.getModel().getNode(t.targetEntity.node))||void 0===n?void 0:n.getPortFromID(t.targetEntity.port));r.setTargetPort(o||null)};e.commands.add({execute:function(){o(r)},undo:function(){o(n)}})},nodeOptionsUpdated:function(t){var n=t.before,r=t.after,o=function(t){e.getModel().getNode(t.id).options.data=it(it({},t),{},{selected:!1})};e.commands.add({execute:function(){o(r)},undo:function(){o(n)}})},variableOptionsUpdated:function(t){var n=t.before,r=t.after,o=function(t){var n=t.id,r=t.options;e.getModel().engine.updateVariableOptions(n,r,!1)};e.commands.add({execute:function(){o(r)},undo:function(){o(n)}})},entitiesRemoved:function(t){var n=t.nodes,r=void 0===n?[]:n,o=t.links,i=void 0===o?[]:o,c=t.points,u=void 0===c?[]:c,a=t.variables,l=void 0===a?[]:a;e.commands.add({execute:function(){i.forEach((function(t){return e.getModel().getLink(t.id).remove()})),r.forEach((function(t){return t.remove()})),u.forEach((function(t){return t.data.remove()})),l.forEach((function(t){return e.getModel().engine.removeVariable(t.id,!1)}))},undo:function(){l.forEach((function(t){return e.getModel().engine.addVariable(t)})),r.forEach((function(t){return e.getModel().addNode(t)})),i.forEach((function(t){var n,r,o=e.getModel().getNode(t.sourceEntity.node).getPortFromID(t.sourceEntity.port),i=e.getModel().getNode(t.targetEntity.node).getPortFromID(t.targetEntity.port),c=new rt({id:t.id});c.setSourcePort(o),c.setTargetPort(i),c.setPoints(t.points),e.getModel().addLink(c),null===(n=c.getSourcePort())||void 0===n||n.updatePortStatus(),null===(r=c.getTargetPort())||void 0===r||r.updatePortStatus(),e.getModel().addLink(c)})),u.forEach((function(t){var n=t.linkID,r=t.data;return e.getModel().getLink(n).addPoint(r)}))}})},entitiesMoved:function(t){var n=t.nodes,r=t.links,o=function(t){n[t].forEach((function(t){var n=t.id,r=t.position;e.getModel().getNode(n).setPosition(r.x,r.y)})),r[t].forEach((function(t){var n=t.id,r=t.points;e.getModel().getLink(n).getPoints().forEach((function(t){t.setPosition(r[t.getID()].position.x,r[t.getID()].position.y)}))}))};e.commands.add({execute:function(){o("after")},undo:function(){o("before")}})}})),r.engine.getStateMachine().pushState(new qo),[Yt,Pt,dt].forEach((function(t){return r.engine.getActionEventBus().registerAction(new t(!1))}));for(var o=0,i=Object.keys(ci);o<i.length;o++){var c=i[o];r.engine.getNodeFactories().registerFactory(ci[c])}for(var u=0,a=Object.keys(ui);u<a.length;u++){var l=a[u];r.engine.getPortFactories().registerFactory(ui[l])}for(var f=0,s=Object.keys(ai);f<s.length;f++){var p=s[f];r.engine.getLinkFactories().registerFactory(ai[p])}})),ii(this,"initializeModel",(function(){var t=r;t.model=new so(t),t.model.setGridSize(r.gridSize),t.model.setLocked(!1),t.model.registerListener({offsetUpdated:function(e){var n=e.offsetX,r=e.offsetY;t.offset={x:"".concat(Math.round(n),"px"),y:"".concat(Math.round(r),"px")},t.wrapperRef.current.style.setProperty("--offset-x",t.offset.x),t.wrapperRef.current.style.setProperty("--offset-y",t.offset.y)},zoomUpdated:function(e){var n=e.zoom;t.gridSize=15*n/100,t.wrapperRef.current.style.setProperty("--grid-size","".concat(t.gridSize,"px"))}}),r.getEngine().setModel(t.model);var e=li.startNode();e.setPosition(200,200),r.getModel().addAll(e),r.repaintCanvas()})),ii(this,"initializeWrapperOptions",(function(){r.wrapperRef.current.style.setProperty("--offset-x",r.offset.x),r.wrapperRef.current.style.setProperty("--offset-y",r.offset.y),r.wrapperRef.current.style.setProperty("--grid-size","".concat(r.gridSize,"px"))})),ii(this,"initializeTestNodes",(function(){var t=li.textNode({title:"TextNode"});t.setPosition(650,200),t.getPort("comparisonText"),r.getModel().addAll(t),r.engine.fireEvent({nodes:[t]},"componentsAdded");var e=li.textNode({title:"TextNode #2"});e.setPosition(1150,200),e.getPort("comparisonText"),t.getPort("flowOut"),e.getPort("flowIn"),r.getModel().addAll(e),r.engine.fireEvent({nodes:[e]},"componentsAdded");var n=li.textNode({title:"TextNode #3"});n.setPosition(1150,500),r.getModel().addAll(n),r.engine.fireEvent({nodes:[n]},"componentsAdded");var o=li.textNode({title:"TextNode #4"});o.setPosition(650,500),r.getModel().addAll(o),r.engine.fireEvent({nodes:[o]},"componentsAdded")})),ii(this,"initializeTestVariables",(function(){var t=[];t.push({id:o.Toolkit.UID(),value:"TestValue",title:"TestVariable",description:"TestDescription"}),t.push({id:o.Toolkit.UID(),value:"TestValue2",title:"TestVariable2",description:"TestDescription2"}),r.normalizedVariables=t.reduce((function(t,e){return t[e.id]=e,t}),{}),r.contextControl.setVariablesUpdatedOn(Date.now())})),ii(this,"updateVariableOptions",(function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={id:t,options:r.normalizedVariables[t]};r.normalizedVariables[t]=oi(oi({},r.normalizedVariables[t]),e);var i={id:t,options:r.normalizedVariables[t]};r.contextControl.setVariablesUpdatedOn(Date.now()),r.variableNodes.forEach((function(e){e.options.data.id===t&&(e.options.data=r.normalizedVariables[t],e.options._updatedOn=Date.now())})),n&&r.engine.fireEvent({before:o,after:i},"variableOptionsUpdated"),r.repaintCanvas()})),ii(this,"addVariable",(function(t){var e={id:o.Toolkit.UID(),value:"TestValue",title:"TestVariable",description:"TestDescription"};r.normalizedVariables[(null==t?void 0:t.id)||e.id]=t||e,r.contextControl.setVariablesUpdatedOn(Date.now())})),ii(this,"removeVariable",(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={variables:[r.normalizedVariables[t]],nodes:[],links:[],points:[]};r.variableNodes.forEach((function(e){e.options.data.id===t&&n.nodes.push(e)})),n.links=n.nodes.reduce((function(t,e){return[].concat(Qo(t),Qo(e.getAllLinks()))}),[]).map((function(t){var e,n,r,o;return{id:t.getID(),points:t.getPoints(),targetEntity:{node:null===(e=t.getTargetPort())||void 0===e?void 0:e.getParent().getID(),port:null===(n=t.getTargetPort())||void 0===n?void 0:n.getID()},sourceEntity:{node:null===(r=t.getSourcePort())||void 0===r?void 0:r.getParent().getID(),port:null===(o=t.getSourcePort())||void 0===o?void 0:o.getID()}}})),n.nodes.forEach((function(t){t.remove()})),delete r.normalizedVariables[t],r.setSelected([]),r.contextControl.setVariablesUpdatedOn(Date.now()),e&&r.engine.fireEvent(n,"entitiesRemoved")})),ii(this,"setSelected",(function(t){t.length?r.contextControl.setSelected(t):r.contextControl.setSelected(null)})),ii(this,"downloadModel",(function(){k().get("http://localhost:3000/algorithm").then((function(t){r.getModel().deserializeModel(t.data,r.getEngine()),r.normalizedVariables=t.data.normalizedVariables,r.variableNodes=t.data.variableNodes.map((function(t){return r.getModel().getNode(t)})),r.contextControl.setVariablesUpdatedOn(Date.now()),r.contextControl.setSelected(null),r.repaintCanvas()}))})),ii(this,"sendStart",(function(){k().post("http://localhost:3000/telegram/start",{phone:"79306924137"})})),ii(this,"sendStop",(function(){k().post("http://localhost:3000/telegram/stop",{phone:"79306924137"})})),ii(this,"saveModel",(function(){var t=r.getModel().serialize();t.normalizedVariables=r.normalizedVariables,t.variableNodes=r.variableNodes.filter((function(t){return null==t?void 0:t.getID()})).map((function(t){return t.getID()})),k().patch("http://localhost:3000/algorithm",t)})),ii(this,"serializeModel",(function(){var t=r.getModel().serialize();t.normalizedVariables=r.normalizedVariables,t.variableNodes=r.variableNodes.filter((function(t){return null==t?void 0:t.getID()})).map((function(t){return t.getID()})),console.log(t)})),ii(this,"addNode",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{clientX:0,clientY:0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=li[t](n);"variableNode"===t&&r.variableNodes.push(o);var i=r.getEngine().getRelativeMousePoint(e),c=i.x,u=i.y;o.setPosition(c,u),r.getModel().addAll(o),r.engine.fireEvent({nodes:[o]},"componentsAdded"),r.repaintCanvas()})),this.wrapperRef=e,this.contextControl=n,this.engine=null,this.modelsList=fi,this.offset={x:"0px",y:"0px"},this.gridSize=15,this.normalizedVariables={},this.variableNodes=[],this.initializeEngine(),this.initializeModel()})),bi=n(7893),gi=n.n(bi);function vi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return hi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hi(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mi=function(t){var e=t.downloadModel,n=t.serializeModel,o=t.saveModel,u=t.variables,a=void 0===u?{}:u,l=t.addVariable,f=t.start,s=t.stop,p=vi((0,r.useContext)(i),1)[0],y=vi((0,r.useState)(null),2),d=y[0],b=y[1],g=vi((0,r.useContext)(c),2),v=g[0],h=g[1];(0,r.useEffect)((function(){var t,e;d&&null!=v&&v.length?(null===(t=v[0].options)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.id)!==d&&b(null):v&&0!==(null==v?void 0:v.length)||b(null)}),[v]),(0,r.useEffect)((function(){if(d){null!=v&&v.length&&v.forEach((function(t){t.options.selected=!1}));var t=new In(a[d]);h([t].concat())}}),[d]);var m=function(t){b(t.target.attributes.getNamedItem("data-id").value)},O=r.createElement("div",{className:"leftPanel__collapse__trigger"},r.createElement("div",null,r.createElement("div",{className:"leftPanel__collapse__trigger--title"},"VARIABLES")),r.createElement("div",{className:"leftPanel__collapse__trigger--add",onClick:function(t){t.stopPropagation(),l()}},"")),P=(0,r.useMemo)((function(){return Object.values(a).map((function(t){return r.createElement("div",{key:t.id,"data-id":t.id,onClick:m,draggable:!0,className:We("leftPanel__collapse__variable",{"leftPanel__collapse__variable--selected":d===t.id}),onDragStart:function(e){return function(t,e){t.dataTransfer.setData("variableID",e)}(e,t.id)}},t.title)}))}),[p,d]);return r.createElement("div",{className:"leftPanel"},r.createElement("button",{type:"button",onClick:e},"Download"),r.createElement("button",{type:"button",onClick:n},"Serialize"),r.createElement("button",{type:"button",onClick:o},"Save"),r.createElement("button",{type:"button",onClick:f},"Start"),r.createElement("button",{type:"button",onClick:s},"Stop"),r.createElement("div",{className:"leftPanel__divider"}),r.createElement(gi(),{open:!0,className:"leftPanel__collapsible",trigger:O,transitionTime:50},P))};mi.propTypes={saveModel:Ue().func,serializeModel:Ue().func,downloadModel:Ue().func,variables:Ue().instanceOf(Object),addVariable:Ue().func},mi.defaultProps={saveModel:function(){},serializeModel:function(){},downloadModel:function(){},variables:{},addVariable:function(){}};var Oi=mi;function Pi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return wi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wi(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ji=function(t){var e=t.node,n=e.options.data,o=n.title,i=n.description,c=Pi((0,r.useState)(e.options),2),u=c[0],a=c[1],l=Pi((0,r.useState)(!1),2),f=l[0],s=l[1],p=(0,r.useRef)(),y=(0,r.useRef)();(0,r.useEffect)((function(){p.current=u,y.current=f}),[u,f]),(0,r.useEffect)((function(){return function(){if(y.current){var t=p.current.data;e.updateOptions(t)}}}),[]);var d=function(t){var e=t.target.attributes.getNamedItem("data-field").value;u.data[e]=t.target.value,a(u),s(!0)},b=function(t){y.current&&(e.updateOptions(u),s(!1))};return r.createElement("div",{className:"NodeDetails"},r.createElement("div",{className:"NodeDetails__title"},"Title"),r.createElement("input",{className:"NodeDetails__title--editor","data-field":"title",onChange:function(t){return d(t)},defaultValue:o,onBlur:b}),r.createElement("div",{className:"NodeDetails__title"},"Description"),r.createElement("input",{className:"NodeDetails__title--editor","data-field":"description",onChange:function(t){return d(t)},defaultValue:i,onBlur:b}))};ji.propTypes={node:Ue().instanceOf(Ct)},ji.defaultProps={node:[]};var Si=ji;function Ei(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ki=function(t){var e=t.node,n=t.engine,o=Ei((0,r.useState)(e.options),2),i=o[0],c=o[1],u=Ei((0,r.useState)(!1),2),a=u[0],l=u[1],f=(0,r.useRef)(),s=(0,r.useRef)();(0,r.useEffect)((function(){f.current=i,s.current=a}),[i,a]),(0,r.useEffect)((function(){return c(e.options),function(){if(s.current){var t=f.current.data;n.updateVariableOptions(e.options.data.id,t)}}}),[e.options.data.id]);var p=function(t){var n=t.target.attributes.getNamedItem("data-field").value,r=e.options;r.data[n]=t.target.value,c(r),l(!0)},y=function(){var t=f.current.data;n.updateVariableOptions(e.options.data.id,t),l(!1)},d=function(){n.removeVariable(e.options.data.id)},b=(0,r.useMemo)((function(){return r.createElement("div",{className:"NodeDetails"},r.createElement("div",{className:"NodeDetails__title"},"Title"),r.createElement("input",{key:"nodeDetails_".concat(e.options.id,"_title"),className:"NodeDetails__title--editor","data-field":"title",onChange:p,defaultValue:e.options.data.title,onBlur:y}),r.createElement("div",{className:"NodeDetails__title"},"Value"),r.createElement("textarea",{key:"nodeDetails_".concat(e.options.id,"_value"),className:"NodeDetails__title--editor","data-field":"value",onChange:p,defaultValue:e.options.data.value,onBlur:y}),r.createElement("div",{className:"NodeDetails__title"},"Description"),r.createElement("input",{key:"nodeDetails_".concat(e.options.id,"_description"),className:"NodeDetails__title--editor","data-field":"description",onChange:p,defaultValue:e.options.data.description,onBlur:y}),r.createElement("br",null),r.createElement("div",{className:"rightPanel__divider"}),r.createElement("br",null),r.createElement("button",{type:"button",style:{color:"black"},onClick:d},"Remove variable"))}),[e.options.id]);return r.createElement(r.Fragment,null,b)};ki.propTypes={node:Ue().instanceOf(Ct),engine:Ue().instanceOf(di)},ki.defaultProps={node:[],engine:null};var Ri=ki;function Ti(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Di=function(t){var e,n,o=t.engine,i=(e=(0,r.useContext)(c),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Ti(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ti(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=i[0];return i[1],r.createElement("div",{className:"rightPanel"},!u||(null==u?void 0:u.length)>1||0===(null==u?void 0:u.length)?r.createElement("div",null):u[0]instanceof In?r.createElement(Ri,{node:u[0],engine:o}):u[0]instanceof S.NodeModel?r.createElement(Si,{node:u[0]}):r.createElement("div",null,JSON.stringify(u.map((function(t){return t.getID()})))))};Di.propTypes={engine:Ue().instanceOf(di)},Di.defaultProps={engine:null};var xi=Di;function Mi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],c=!0,u=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ni(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ni(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ni(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ai=function(){var t=y.toggleMenu,e=Mi((0,r.useState)(null),2),n=e[0],u=e[1],a=Mi((0,r.useState)(null),2),l=a[0],f=a[1],s=Mi((0,r.useState)(Date.now()),2),p=s[0],d=s[1],b=(0,r.useRef)(null);return(0,r.useEffect)((function(){var t=new di(b,{selected:l,setSelected:f,variablesUpdatedOn:p,setVariablesUpdatedOn:d});u(t)}),[]),(0,r.useEffect)((function(){n&&n.initializeWrapperOptions()}),[n]),n?r.createElement("div",{className:"test-wrapper",ref:b},r.createElement(c.Provider,{value:[l,f]},r.createElement(i.Provider,{value:[p,d]},r.createElement(Oi,{serializeModel:n.serializeModel,downloadModel:n.downloadModel,saveModel:n.saveModel,variables:n.normalizedVariables,addVariable:n.addVariable,start:n.sendStart,stop:n.sendStop})),r.createElement("div",{className:"diagram-wrapper",onContextMenu:function(e){e.preventDefault(),t(!0,{x:e.clientX,y:e.clientY},"editor")},onDrop:function(t){return function(t){var e=t.dataTransfer.getData("variableID");n.addNode("variableNode",{clientX:t.clientX,clientY:t.clientY},n.getVariables()[e])}(t)},onDragOver:function(t){return t.preventDefault(),t.dataTransfer.dropEffect="move",!1}},n&&r.createElement(o.CanvasWidget,{engine:n.getEngine(),className:"canvas-widget"})),r.createElement(xi,{engine:n}),r.createElement(j,{addNode:n.addNode,values:Object.keys(n.modelsList)}))):r.createElement("div",null)};Ai.propTypes={};var Ci=Ai}}]);